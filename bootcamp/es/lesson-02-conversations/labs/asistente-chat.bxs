// asistente-chat.bxs
// Laboratorio: Construye un asistente de chat interactivo
// Ejecutar con: boxlang asistente-chat.bxs

println( "ğŸ¤– Â¡Bienvenido al Asistente de Chat con IA!" )
println()
println( "Elige una personalidad:" )
println( "1. Ãštil - Amigable y solidario" )
println( "2. Gracioso - Ingenioso con chistes" )
println( "3. Serio - Profesional y formal" )
println()

print( "Ingresa 1, 2 o 3: " )
choice = readLine()

// Establecer personalidad segÃºn la elecciÃ³n
switch( choice ) {
    case "1":
        personality = "You are a helpful, friendly assistant. Be warm and supportive."
        println( "âœ… Â¡Modo Ãštil activado!" )
        break
    case "2":
        personality = "You are a funny assistant who loves jokes and puns. Make people laugh!"
        println( "ğŸ˜„ Â¡Modo Gracioso activado!" )
        break
    case "3":
        personality = "You are a serious, professional assistant. Be formal and precise."
        println( "ğŸ“‹ Â¡Modo Serio activado!" )
        break
    default:
        personality = "You are a helpful assistant."
        println( "âœ… Â¡Modo predeterminado activado!" )
}

println()
println( "Â¡Chat iniciado! Escribe 'salir' para terminar." )
println( "â”€".repeat( 40 ) )

// Inicializar conversaciÃ³n con personalidad
conversation = aiMessage()
    .system( personality )

// Bucle de chat
messageCount = 0
running = true

while( running ) {
    print( "TÃº: " )
    userInput = readLine()

    if( userInput.trim() == "salir" ) {
        running = false
        println()
        println( "ğŸ“Š EstadÃ­sticas: #messageCount# mensajes intercambiados" )
        println( "ğŸ‘‹ Â¡AdiÃ³s!" )
    } else {
        conversation.user( userInput )

        try {
            response = aiChat( conversation )
            println( "IA: " & response )
            conversation.assistant( response )
            messageCount++
        } catch( any e ) {
            println( "âŒ Error: " & e.message )
        }

        println()
    }
}
