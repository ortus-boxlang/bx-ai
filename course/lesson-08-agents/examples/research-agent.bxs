// research-agent.bxs
/**
 * Research Agent Demo
 * Agent that gathers and synthesizes information
 */

println( "=== Research Agent Demo ===" )
println()

// Mock research database
researchData = {
    "BoxLang": {
        description: "Modern dynamic JVM language",
        features: [ "CFML compatible", "Java interop", "Fast" ],
        useCase: "Web and enterprise applications"
    },
    "AI": {
        description: "Artificial Intelligence",
        features: [ "Machine learning", "Natural language", "Vision" ],
        useCase: "Automation and decision making"
    }
}

// Research tool
searchTool = aiTool()
    .setName( "research_topic" )
    .setDescription( "Research a topic and return detailed information" )
    .setParameters( {
        type: "object",
        properties: {
            topic: { type: "string", description: "Topic to research" }
        }
    } )
    .setHandler( ( args ) => {
        topic = args.topic

        // Find matching topic (case-insensitive)
        for ( key in researchData ) {
            if ( topic.findNoCase( key ) ) {
                data = researchData[ key ]
                return serializeJSON( data )
            }
        }

        return "No information found for topic: #topic#"
    } )

// Create research agent
researchAgent = aiAgent()
    .setName( "Research Agent" )
    .setInstructions( "
        You are a thorough researcher.
        When given a topic:
        1. Use research_topic to gather information
        2. Analyze the findings
        3. Present a clear summary
        4. Provide recommendations
    " )
    .setTools( [ searchTool ] )

// Research tasks
topics = [
    "Research BoxLang and explain what it is",
    "Research AI and its applications",
    "Compare BoxLang and AI technologies"
]

topics.each( topic => {
    println( "=".repeat( 70 ) )
    println( "Research Task: #topic#" )
    println( "=".repeat( 70 ) )
    println()

    try {
        report = researchAgent.run( topic )
        println( report )

    } catch( any e ) {
        println( "âŒ Error: #e.message#" )
    }

    println()
} )

println( "ğŸ’¡ Research Agent Pattern:" )
println( "- Gathers information from multiple sources" )
println( "- Analyzes and synthesizes findings" )
println( "- Presents structured reports" )
println( "- Useful for: Market research, documentation, analysis" )
